<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.1//EN" 
	"http://www.w3.org/TR/xhtml-basic/xhtml-basic11.dtd">
<html xml:lang="fr" lang="fr" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
<meta name='generator' content='SPIP 2.1.26' />
<meta name='language' content='fr' />
<meta name='description' content='PACS 2013 2014' />
<link rel='stylesheet' type='text/css' media='all'
	href='https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/LI355-2014fev/spip.php?page=config-placement.css' />
<link rel='stylesheet' type='text/css' media='screen, projection' 
	href='https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/LI355-2014fev/spip.php?page=config.css&amp;spec=Licence' />
<link rel='stylesheet' type='text/css'  media='print'
	href='https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/extensions/DidacSPIP/css/impression.css' />
<link rel='stylesheet' type='text/css' 
	media='handheld, only screen and (max-device-width: 480px)'
	href='https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/extensions/DidacSPIP/css/handheld.css' />
<link rel="alternate"
	type="application/rss+xml"
	title="Syndiquer cette rubrique"
	href="https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/?page=backend&amp;id_rubrique[]=1&amp;id_rubrique[]=279"
/><link rel="search" type="application/opensearchdescription+xml" 
	href="https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/LI355-2014fev/spip.php?page=opensearch.xml"
	title="PACS 2013 2014" />
<script type='text/javascript' src='https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/extensions/DidacSPIP/prive/javascript/admin_check.js'></script>
<title>7. Accessibilité des sites Web (PACS 2013 2014)</title>
</head><body class="default-parameters">
<div id="navigation-upmc">
	<div class="menu-lv1">
		<a class='menu-logo' href='https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/ecrire/'
			title='Espace priv&eacute;'>Espace priv&eacute;</a>
	</div>
	<div class="menu-lv1"><a href="http://www.upmc.fr" title="Universit&eacute; Pierre et Marie Curie">UPMC</a></div>
	<div class='menu-lv1 fs80'><a href="https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev" title="Accueil du site">PACS 2013 2014</a></div>
	<div class="menu-lv1">
	<a href='pacs' title="Programmation des Architectures Clients-serveur">pacs</a>
</div>


<div class="menu-lv1">Navigation dans la page</div><ul class="menu-lv1">
<li class="menu-lv2"><a href='#a1'>Les balises auto-fermantes</a></li>
<li class="menu-lv2"><a href='#a2'>Les attributs Alt</a></li>
<li class="menu-lv2"><a href='#a3'>Les attributs Title</a></li>
<li class="menu-lv2"><a href='#a4'>Les tables</a></li>
<li class="menu-lv2"><a href='#a5'>Les balises Input </a></li>
<li class="menu-lv2"><a href='#a6'>Indentation du texte HTML</a></li>
</ul>


<div class="menu-lv1"><form id="formulaire_recherche" action="https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?page=recherche" method="get"><div>
<input name="page" value="recherche" type="hidden" />
<a href='.'
	onclick='addSearchProvider("https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?page=opensearch.xml");return false'
	title='Utiliser le moteur de recherche OpenSearch'>O</a>
<label for='recherche' style='display:none'>Rechercher</label>
<input type="text" name="recherche" id='recherche' value="Rechercher" />
</div></form>
</div>	<div class="menu-lv1-last">&nbsp;</div>
</div><div id="content">

<h1>pacs&nbsp;: Travaux Dirig&eacute;s<br />7. Accessibilité des sites Web</h1>
<p>Pour des raisons historiques tous les navigateurs acceptent des pages HTML non validées et en font une présentation acceptable, ce qui rend la validation XHTML en fait assez souvent superflue. Cependant, elle reprend son intérêt si on poursuit la mise en conformité jusqu&#8217;à l&#8217;<i>accessibilité</i>. C&#8217;est un sous-ensemble de XHTML tel que les différentes parties du document puissent être énoncées par des synthétiteurs vocaux afin que les aveugles et les mal voyants, par tatonnement,  activent les liens présents et remplissent les formulaires demandés.</p>

<p>La présente séance consiste à utiliser un analyseur XML pour corriger automatiquement les manquements aux principales règles d&#8217;accessibilité, qui constituent autant d&#8217;exercices.  Le cadre général est toujours une initialisation de SAX avec les preneurs d&#8217;événements, qu&#8217;il s&#8217;agit d&#8217;enrichir.  On partira donc de la fonction principale suivante&nbsp;:</p>

<div class='spip_code'><code>function accessibiliser($file) {<br />
&nbsp; &nbsp; &nbsp; &nbsp; $xml_parser = xml_parser_create();<br />
&nbsp; &nbsp; &nbsp; &nbsp; xml_set_element_handler($xml_parser, &quot;ouvrante&quot;, &quot;fermante&quot;);<br />
&nbsp; &nbsp; &nbsp; &nbsp; xml_set_character_data_handler($xml_parser, &quot;texte&quot;);<br />
&nbsp; &nbsp; &nbsp; &nbsp; xml_parser_set_option($xml_parser, XML_OPTION_CASE_FOLDING, false);<br />
&nbsp; &nbsp; &nbsp; &nbsp; if (!($f = fopen($file, &quot;r&quot;))) {<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; die(&quot;Impossible d'ouvrir le fichier '$file'&quot;);<br />
&nbsp; &nbsp; &nbsp; &nbsp; }<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; while ($data = fread($f, 1024)) {<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!xml_parse($xml_parser, $data, feof($f))) {<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; die(sprintf(&quot;erreur XML : %s ligne %d&quot;,<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; xml_error_string(xml_get_error_code($xml_parser)),<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; xml_get_current_line_number($xml_parser)));<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp; &nbsp; &nbsp; &nbsp; xml_parser_free($xml_parser);<br />
}</code></div>
<p>et des preneurs élémentaires&nbsp;:</p>

<div class='spip_code'><code>function ouvrante($parser, $name, $attrs) {<br />
 &nbsp;echo &quot;&lt;$name&quot;;<br />
 &nbsp;foreach ($attrs as $k =&gt; $v) &nbsp; echo &quot; $k='&quot;, htmlspecialchars($v) , &quot;'&quot;;<br />
 &nbsp;echo &quot;&gt;&quot;;<br />
}<br />
<br />
function fermante($parser, $name) {<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo &quot;&lt;/&quot;, $name, &quot;&gt;&quot;; <br />
}<br />
<br />
function texte($parser, $data) {<br />
 &nbsp;echo &nbsp;htmlspecialchars($data);<br />
 }</code></div>
<br /><div id='sequence279'>
<span id='e2813'></span>


<h2 id='a1'>1 Les balises auto-fermantes</h2>
<p>Afin de ne pas dégrader la présentation des balises que la DTD XHTML indique comme EMPTY (<tt>link, meta, input, img</tt>), il faut commencer par transformer les balises vides et fermés de manière explicite (exemple&nbsp;: &lt;<i>balise</i> &gt;&lt;/<i>balise</i> &gt;) à une fermeture abrégée (&lt;<i>balise</i> /&gt;). Nous allons donc modifier les preneurs d&#8217;événements ci-dessus afin d&#8217;effectuer cette transformation.</p>

<p>Pour cela, il ne faut pas appliquer <tt>echo</tt> sur &gt; dans le preneur des ouvrantes, mais différer son envoi dans l&#8217;événement SAX suivant&nbsp;: si celui-ci appelle le preneur des fermantes, l&#8217;abréviation y sera possible, sinon il faut envoyer &gt;.</p>


<div class='solution'>
<div>Solution
<a href="https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?action=acceder_document&amp;arg=635&amp;cle=702bcddc4b3f1f89c525562618cd89518b74d7e8&amp;file=distant%2FVCS%2FLI355%2FTD%2F7%2FbalisesAutoFermantes.php"
      style='float:right'
      class='solution'>T&eacute;l&eacute;charger balisesAutoFermantes.php</a>
</div>
<p><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">global&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$ferme&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br /><br />function&nbsp;</span><span style="color: #0000BB">ouvrante</span><span style="color: #007700">(</span><span style="color: #0000BB">$parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$ferme&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;$name"</span><span style="color: #007700">;&nbsp;<br /><br />&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$attrs&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$k&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;$k='$v'"</span><span style="color: #007700">;<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$ferme&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">fermante</span><span style="color: #007700">(</span><span style="color: #0000BB">$parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">;<br />&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">)&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&nbsp;/&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;else&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;/"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"&gt;"</span><span style="color: #007700">;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$ferme&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">texte</span><span style="color: #007700">(</span><span style="color: #0000BB">$parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$depth</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">;<br />&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$ferme&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">//Tests<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">accessibiliser</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$xml_parser&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">xml_parser_create</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_set_element_handler</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"ouvrante"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"fermante"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_set_character_data_handler</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"texte"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_parser_set_option</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">XML_OPTION_CASE_FOLDING</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!(</span><span style="color: #0000BB">$f&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"r"</span><span style="color: #007700">)))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">"Impossible&nbsp;d'ouvrir&nbsp;le&nbsp;fichier&nbsp;'$file'"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(</span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fread</span><span style="color: #007700">(</span><span style="color: #0000BB">$f</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1024</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">xml_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">feof</span><span style="color: #007700">(</span><span style="color: #0000BB">$f</span><span style="color: #007700">)))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"erreur&nbsp;XML&nbsp;:&nbsp;%s&nbsp;ligne&nbsp;%d"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_error_string</span><span style="color: #007700">(</span><span style="color: #0000BB">xml_get_error_code</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">)),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_get_current_line_number</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">)));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_parser_free</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">accessibiliser</span><span style="color: #007700">(</span><span style="color: #DD0000">"test.html"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></p></div>


<span id='e2200'></span>


<h2 id='a2'>2 Les attributs Alt</h2>
<p>Toute image doit être légendée, autrement dit toutes les balises
 <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/struct/objects.html#edef-IMG" class='spip_glossaire' title="Voir la description de 'img' dans la documentation de 'html'" rel='external'>img</a>
 doivent avoir un  attribut
 <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/struct/objects.html#adef-alt" class='spip_glossaire' title="Voir la description de 'alt' dans la documentation de 'html' section 1" rel='external'>alt</a>.
Repérer  les balises fautives et rajouter  cet attribut avec comme valeur le nom du fichier indiqué dans l&#8217;attribut <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/interact/scripts.html#adef-src-SCRIPT" class='spip_glossaire' title="Voir la description de 'src' dans la documentation de 'html' section 1" rel='external'>src</a> (le nom du fichier est en général évocateur du contenu).
On utilisera la fonction <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/PHP/html/function.basename.html" class='spip_glossaire' title="Voir la description de 'basename' dans la documentation de 'php'" rel='external'>basename</a>&nbsp;pour avoir le nom du fichier, débarassé du chemin d&#8217;accès, et <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/PHP/html/function.preg-match.html" class='spip_glossaire' title="Voir la description de 'preg_match' dans la documentation de 'php'" rel='external'>preg_match</a>&nbsp;pour éliminer l&#8217;extension.</p>


<div class='solution'>
<div>Solution
<a href="https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?action=acceder_document&amp;arg=633&amp;cle=e4ad62b79343d4e2ddff958c11a9814dbda6aaba&amp;file=distant%2FVCS%2FLI355%2FTD%2F7%2FattributAlt.php"
      style='float:right'
      class='solution'>T&eacute;l&eacute;charger attributAlt.php</a>
</div>
<p><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">global&nbsp;</span><span style="color: #0000BB">$depth</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$depth&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$ferme&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">0&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br /><br />function&nbsp;</span><span style="color: #0000BB">ouvrante</span><span style="color: #007700">(</span><span style="color: #0000BB">$parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$depth</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">])&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$depth</span><span style="color: #007700">++;<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;$name"</span><span style="color: #007700">;<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$alt&nbsp;</span><span style="color: #007700">=&nbsp;(</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'img'</span><span style="color: #007700">);<br />&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$attrs&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$k&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$k&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'alt'</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">$alt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;elseif&nbsp;(</span><span style="color: #0000BB">$k&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'src'</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">$src&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;$k='$v'"</span><span style="color: #007700">;<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$alt</span><span style="color: #007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$baseName&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #0000BB">$src</span><span style="color: #007700">);&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;if(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">"/(\w+)\.\w+$/"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$baseName</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$match</span><span style="color: #007700">))&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;alt='"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$match</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">"'"</span><span style="color: #007700">;<br />&nbsp;&nbsp;}&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">fermante</span><span style="color: #007700">(</span><span style="color: #0000BB">$parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$depth</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">;<br />&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">])&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&nbsp;/&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;else&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;/"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"&gt;"</span><span style="color: #007700">;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$depth</span><span style="color: #007700">--;<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">texte</span><span style="color: #007700">(</span><span style="color: #0000BB">$parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$depth</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">;<br />&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">])&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">//Tests<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">accessibiliser</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$xml_parser&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">xml_parser_create</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_set_element_handler</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"ouvrante"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"fermante"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_set_character_data_handler</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"texte"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_parser_set_option</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">XML_OPTION_CASE_FOLDING</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!(</span><span style="color: #0000BB">$f&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"r"</span><span style="color: #007700">)))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">"Impossible&nbsp;d'ouvrir&nbsp;le&nbsp;fichier&nbsp;'$file'"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(</span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fread</span><span style="color: #007700">(</span><span style="color: #0000BB">$f</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1024</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">xml_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">feof</span><span style="color: #007700">(</span><span style="color: #0000BB">$f</span><span style="color: #007700">)))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"erreur&nbsp;XML&nbsp;:&nbsp;%s&nbsp;ligne&nbsp;%d"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_error_string</span><span style="color: #007700">(</span><span style="color: #0000BB">xml_get_error_code</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">)),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_get_current_line_number</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">)));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_parser_free</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></p></div>


<span id='e2201'></span>


<h2 id='a3'>3 Les attributs Title</h2>
<p>Toute balise 
<a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/struct/links.html#edef-A" class='spip_glossaire' title="Voir la description de 'a' dans la documentation de 'html'" rel='external'>a</a> 
ayant un attribut <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/struct/links.html#adef-href" class='spip_glossaire' title="Voir la description de 'href' dans la documentation de 'html' section 1" rel='external'>href</a> 
doit aussi avoir un attribut
<a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/struct/global.html#adef-title" class='spip_glossaire' title="Voir la description de 'title' dans la documentation de 'html' section 1" rel='external'>title</a>, et
deux balises
<a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/struct/links.html#edef-A" class='spip_glossaire' title="Voir la description de 'a' dans la documentation de 'html'" rel='external'>a</a>
doivent avoir des attributs  
<a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/struct/global.html#adef-title" class='spip_glossaire' title="Voir la description de 'title' dans la documentation de 'html' section 1" rel='external'>title</a> 
différents si leurs attributs  <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/struct/links.html#adef-href" class='spip_glossaire' title="Voir la description de 'href' dans la documentation de 'html' section 1" rel='external'>href</a> 
sont différents, égaux sinon.
Corriger les balises 
<a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/struct/links.html#edef-A" class='spip_glossaire' title="Voir la description de 'a' dans la documentation de 'html'" rel='external'>a</a> fautives sur ces points&nbsp;;
on utilisera un tableau déclaré par 
<tt>static</tt> pour  mémoriser 
dans un tableau indexé par les valeurs des attributs 
<a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/struct/links.html#adef-href" class='spip_glossaire' title="Voir la description de 'href' dans la documentation de 'html' section 1" rel='external'>href</a> 
tous les attributs 
<a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/struct/global.html#adef-title" class='spip_glossaire' title="Voir la description de 'title' dans la documentation de 'html' section 1" rel='external'>title</a>
rencontrés.</p>

<p>En cas d&#8217;attribut <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/struct/global.html#adef-title" class='spip_glossaire' title="Voir la description de 'title' dans la documentation de 'html' section 1" rel='external'>title</a> absent pour un attribut  <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/struct/links.html#adef-href" class='spip_glossaire' title="Voir la description de 'href' dans la documentation de 'html' section 1" rel='external'>href</a>  nouveau, lui donner arbitrairement comme valeur le numéro de ce lien (c&#8217;est-à-dire la taille actuelle du tableau).</p>

<p>En cas d&#8217;attribut <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/struct/global.html#adef-title" class='spip_glossaire' title="Voir la description de 'title' dans la documentation de 'html' section 1" rel='external'>title</a> absent pour un attribut  <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/struct/links.html#adef-href" class='spip_glossaire' title="Voir la description de 'href' dans la documentation de 'html' section 1" rel='external'>href</a>  existant, lui donner comme valeur le <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/struct/global.html#adef-title" class='spip_glossaire' title="Voir la description de 'title' dans la documentation de 'html' section 1" rel='external'>title</a> associé à l&#8217;attribut <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/struct/links.html#adef-href" class='spip_glossaire' title="Voir la description de 'href' dans la documentation de 'html' section 1" rel='external'>href</a>.</p>


<div class='solution'>
<div>Solution
<a href="https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?action=acceder_document&amp;arg=634&amp;cle=90d12c38c23d2f141e24a512339c9bf46d54400a&amp;file=distant%2FVCS%2FLI355%2FTD%2F7%2FattributTitle.php"
      style='float:right'
      class='solution'>T&eacute;l&eacute;charger attributTitle.php</a>
</div>
<p><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">global&nbsp;</span><span style="color: #0000BB">$depth</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$depth&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$ferme&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">0&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br /><br />function&nbsp;</span><span style="color: #0000BB">ouvrante</span><span style="color: #007700">(</span><span style="color: #0000BB">$parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">)<br />{<br />&nbsp;global&nbsp;</span><span style="color: #0000BB">$depth</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">;<br />&nbsp;static&nbsp;</span><span style="color: #0000BB">$titles&nbsp;</span><span style="color: #007700">=&nbsp;array();<br /><br />&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">])&nbsp;{<br />&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />&nbsp;}<br />&nbsp;</span><span style="color: #0000BB">$depth</span><span style="color: #007700">++;<br /><br />&nbsp;if&nbsp;((</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'img'</span><span style="color: #007700">)&nbsp;AND&nbsp;!isset(</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'alt'</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'alt'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'src'</span><span style="color: #007700">]);<br />&nbsp;}<br />&nbsp;if&nbsp;((</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'a'</span><span style="color: #007700">)&nbsp;AND&nbsp;isset(</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'href'</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$precedent&nbsp;</span><span style="color: #007700">=&nbsp;isset(</span><span style="color: #0000BB">$titles</span><span style="color: #007700">[</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'href'</span><span style="color: #007700">]])&nbsp;?&nbsp;</span><span style="color: #0000BB">$titles</span><span style="color: #007700">[</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'href'</span><span style="color: #007700">]]&nbsp;:&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;if&nbsp;(!isset(</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'title'</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!</span><span style="color: #0000BB">$precedent</span><span style="color: #007700">)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$precedent&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Lien&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;(</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$titles</span><span style="color: #007700">)+</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'title'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$precedent</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;}else{<br />&nbsp;&nbsp;&nbsp;&nbsp;if((</span><span style="color: #0000BB">$precedent</span><span style="color: #007700">)&nbsp;AND&nbsp;(</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'title'</span><span style="color: #007700">]&nbsp;!=&nbsp;</span><span style="color: #0000BB">$precedent</span><span style="color: #007700">))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'title'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$precedent</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;else<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$precedent&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'title'</span><span style="color: #007700">];&nbsp;<br />&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$titles</span><span style="color: #007700">[</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'href'</span><span style="color: #007700">]]&nbsp;=&nbsp;</span><span style="color: #0000BB">$precedent</span><span style="color: #007700">;<br />&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;<br />&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;$name"</span><span style="color: #007700">;<br />&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$attrs&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$k&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;$k='$v'"</span><span style="color: #007700">;<br />&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br />}<br /><br /><br /><br />function&nbsp;</span><span style="color: #0000BB">fermante</span><span style="color: #007700">(</span><span style="color: #0000BB">$parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br />{<br />&nbsp;global&nbsp;</span><span style="color: #0000BB">$depth</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">;<br />&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">])&nbsp;<br />&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&nbsp;/&gt;'</span><span style="color: #007700">;<br />&nbsp;else&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;/"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"&gt;"</span><span style="color: #007700">;<br />&nbsp;</span><span style="color: #0000BB">$depth</span><span style="color: #007700">--;<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">texte</span><span style="color: #007700">(</span><span style="color: #0000BB">$parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">)<br />{<br />&nbsp;global&nbsp;</span><span style="color: #0000BB">$depth</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">;<br />&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">])&nbsp;{<br />&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />&nbsp;}<br />&nbsp;echo&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">//Tests<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">accessibiliser</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$xml_parser&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">xml_parser_create</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_set_element_handler</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"ouvrante"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"fermante"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_set_character_data_handler</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"texte"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_parser_set_option</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">XML_OPTION_CASE_FOLDING</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!(</span><span style="color: #0000BB">$f&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"r"</span><span style="color: #007700">)))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">"Impossible&nbsp;d'ouvrir&nbsp;le&nbsp;fichier&nbsp;'$file'"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(</span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fread</span><span style="color: #007700">(</span><span style="color: #0000BB">$f</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1024</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">xml_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">feof</span><span style="color: #007700">(</span><span style="color: #0000BB">$f</span><span style="color: #007700">)))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"erreur&nbsp;XML&nbsp;:&nbsp;%s&nbsp;ligne&nbsp;%d"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_error_string</span><span style="color: #007700">(</span><span style="color: #0000BB">xml_get_error_code</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">)),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_get_current_line_number</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">)));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_parser_free</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></p></div>


<span id='e2203'></span>


<h2 id='a4'>4 Les tables</h2>
<p>Une table doit avoir au moins une ligne de balises 
<a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/index/attributes.html" class='spip_glossaire' title="Voir la description de 'th' dans la documentation de 'html' section 1" rel='external'>th</a>, censées indiquer le contenu des colonnes. 
Pour simplifier, on considérera que si 
la première ligne contient des balises
<a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/index/attributes.html" class='spip_glossaire' title="Voir la description de 'td' dans la documentation de 'html' section 1" rel='external'>td</a>, il s&#8217;agit des noms de colonnes et il suffit de remplacer 
&lt;td et &lt;/td par
&lt;th et &lt;/th respectivement.
Utiliser un tableau global indexé par le même compteur global que précédemment pour savoir si une balise 
<a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/struct/tables.html#edef-TD" class='spip_glossaire' title="Voir la description de 'td' dans la documentation de 'html'" rel='external'>td</a>&nbsp;fait partie de la première ligne de la table rencontrée.
On pourra utiliser le prédicat <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/PHP/html/function.isset.html" class='spip_glossaire' title="Voir la description de 'isset' dans la documentation de 'php'" rel='external'>isset</a>&nbsp;pour le test, et il faudra utiliser
<a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/PHP/html/function.unset.html" class='spip_glossaire' title="Voir la description de 'unset' dans la documentation de 'php'" rel='external'>unset</a>&nbsp;pour bien gérer le cas de plusieurs tables situées à la même profondeur.</p>


<div class='solution'>
<div>Solution
<a href="https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?action=acceder_document&amp;arg=638&amp;cle=fc1a4fe59be187373e30c3018cd02da0450bacf9&amp;file=distant%2FVCS%2FLI355%2FTD%2F7%2Ftables.php"
      style='float:right'
      class='solution'>T&eacute;l&eacute;charger tables.php</a>
</div>
<p><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">global&nbsp;</span><span style="color: #0000BB">$depth</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$tables</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$tableIndex</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$depth&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$tableIndex&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$ferme&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">0&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$tables&nbsp;</span><span style="color: #007700">=&nbsp;array&nbsp;();<br /><br />function&nbsp;</span><span style="color: #0000BB">ouvrante</span><span style="color: #007700">(</span><span style="color: #0000BB">$parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$depth</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$tables</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$tableIndex</span><span style="color: #007700">;<br />&nbsp;static&nbsp;</span><span style="color: #0000BB">$titles&nbsp;</span><span style="color: #007700">=&nbsp;array();<br /><br />&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">])&nbsp;{<br />&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />&nbsp;}<br />&nbsp;</span><span style="color: #FF8000">//&nbsp;La&nbsp;ligne&nbsp;suivante&nbsp;concerne&nbsp;la&nbsp;Question&nbsp;4&nbsp;+&nbsp;declaration&nbsp;global<br />&nbsp;//une&nbsp;nouvelle&nbsp;table&nbsp;dont&nbsp;la&nbsp;premiere&nbsp;ligne&nbsp;n'est&nbsp;pas&nbsp;encore&nbsp;rencontrée<br />&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'table'</span><span style="color: #007700">)&nbsp;{</span><span style="color: #0000BB">$tables</span><span style="color: #007700">[</span><span style="color: #0000BB">$tableIndex</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$tableIndex</span><span style="color: #007700">++;}<br />&nbsp;<br />&nbsp;</span><span style="color: #FF8000">//ce&nbsp;sont&nbsp;les&nbsp;TD&nbsp;de&nbsp;la&nbsp;première&nbsp;ligne&nbsp;de&nbsp;la&nbsp;table&nbsp;courante<br />&nbsp;</span><span style="color: #007700">if&nbsp;((</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'td'</span><span style="color: #007700">)&nbsp;AND&nbsp;</span><span style="color: #0000BB">$tables</span><span style="color: #007700">[</span><span style="color: #0000BB">$tableIndex&nbsp;</span><span style="color: #007700">-&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">])&nbsp;</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'th'</span><span style="color: #007700">;&nbsp;<br />&nbsp;<br />&nbsp;</span><span style="color: #0000BB">$depth</span><span style="color: #007700">++;<br />&nbsp;<br />&nbsp;if&nbsp;((</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'img'</span><span style="color: #007700">)&nbsp;AND&nbsp;!isset(</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'alt'</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'alt'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'src'</span><span style="color: #007700">]);<br />&nbsp;}<br />&nbsp;<br />&nbsp;if&nbsp;((</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'a'</span><span style="color: #007700">)&nbsp;AND&nbsp;isset(</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'href'</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$precedent&nbsp;</span><span style="color: #007700">=&nbsp;isset(</span><span style="color: #0000BB">$titles</span><span style="color: #007700">[</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'href'</span><span style="color: #007700">]])&nbsp;?&nbsp;</span><span style="color: #0000BB">$titles</span><span style="color: #007700">[</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'href'</span><span style="color: #007700">]]&nbsp;:&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;if&nbsp;(!isset(</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'title'</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!</span><span style="color: #0000BB">$precedent</span><span style="color: #007700">)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$precedent&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Lien&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;(</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$titles</span><span style="color: #007700">)+</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'title'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$precedent</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}else{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if((</span><span style="color: #0000BB">$precedent</span><span style="color: #007700">)&nbsp;AND&nbsp;(</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'title'</span><span style="color: #007700">]&nbsp;!=&nbsp;</span><span style="color: #0000BB">$precedent</span><span style="color: #007700">))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'title'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$precedent</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$precedent&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'title'</span><span style="color: #007700">];&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$titles</span><span style="color: #007700">[</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'href'</span><span style="color: #007700">]]&nbsp;=&nbsp;</span><span style="color: #0000BB">$precedent</span><span style="color: #007700">;<br />&nbsp;}<br />&nbsp;&nbsp;&nbsp;<br />&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;$name"</span><span style="color: #007700">;<br />&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$attrs&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$k&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;$k='$v'"</span><span style="color: #007700">;<br />&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;L'essentiel&nbsp;de&nbsp;la&nbsp;question&nbsp;4&nbsp;est&nbsp;fait&nbsp;ici<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">fermante</span><span style="color: #007700">(</span><span style="color: #0000BB">$parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br />{<br />&nbsp;global&nbsp;</span><span style="color: #0000BB">$depth</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$tables</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$tableIndex</span><span style="color: #007700">;<br />&nbsp;if&nbsp;((</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'td'</span><span style="color: #007700">)&nbsp;AND&nbsp;</span><span style="color: #0000BB">$tables</span><span style="color: #007700">[</span><span style="color: #0000BB">$tableIndex</span><span style="color: #007700">-</span><span style="color: #0000BB">1</span><span style="color: #007700">])&nbsp;</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'th'</span><span style="color: #007700">;<br />&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">])&nbsp;<br />&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&nbsp;/&gt;'</span><span style="color: #007700">;<br />&nbsp;else&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;/"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"&gt;"</span><span style="color: #007700">;<br />&nbsp;<br />&nbsp;if&nbsp;(</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'table'</span><span style="color: #007700">)&nbsp;{unset(</span><span style="color: #0000BB">$tables</span><span style="color: #007700">[</span><span style="color: #0000BB">$tableIndex&nbsp;&nbsp;</span><span style="color: #007700">-&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);&nbsp;</span><span style="color: #0000BB">$tableIndex</span><span style="color: #007700">--;};<br />&nbsp;</span><span style="color: #0000BB">$depth</span><span style="color: #007700">--;<br />&nbsp;<br />&nbsp;if&nbsp;(</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'tr'</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">$tables</span><span style="color: #007700">[</span><span style="color: #0000BB">$tableIndex&nbsp;&nbsp;</span><span style="color: #007700">-&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//la&nbsp;première&nbsp;ligne&nbsp;de&nbsp;la&nbsp;table&nbsp;courante&nbsp;est&nbsp;forcément&nbsp;déjà&nbsp;traitée<br /><br /></span><span style="color: #007700">}<br /><br />function&nbsp;</span><span style="color: #0000BB">texte</span><span style="color: #007700">(</span><span style="color: #0000BB">$parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">)<br />{<br />&nbsp;global&nbsp;</span><span style="color: #0000BB">$depth</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">;<br />&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">])&nbsp;{<br />&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />&nbsp;}<br />&nbsp;echo&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">//Tests<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">accessibiliser</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$xml_parser&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">xml_parser_create</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_set_element_handler</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"ouvrante"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"fermante"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_set_character_data_handler</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"texte"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_parser_set_option</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">XML_OPTION_CASE_FOLDING</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!(</span><span style="color: #0000BB">$f&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"r"</span><span style="color: #007700">)))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">"Impossible&nbsp;d'ouvrir&nbsp;le&nbsp;fichier&nbsp;'$file'"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(</span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fread</span><span style="color: #007700">(</span><span style="color: #0000BB">$f</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1024</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">xml_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">feof</span><span style="color: #007700">(</span><span style="color: #0000BB">$f</span><span style="color: #007700">)))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"erreur&nbsp;XML&nbsp;:&nbsp;%s&nbsp;ligne&nbsp;%d"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_error_string</span><span style="color: #007700">(</span><span style="color: #0000BB">xml_get_error_code</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">)),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_get_current_line_number</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">)));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_parser_free</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">);<br />}&nbsp;<br /><br /></span><span style="color: #0000BB">accessibiliser</span><span style="color: #007700">(</span><span style="color: #DD0000">"test.html"</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;<br /></span><span style="color: #0000BB">?&gt;<br /></span>
</span>
</code></p></div>


<span id='e2202'></span>


<h2 id='a5'>5 Les balises Input </h2>
<p>Ces balises doivent avoir un attribut 
<a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/struct/global.html#adef-id" class='spip_glossaire' title="Voir la description de 'id' dans la documentation de 'html' section 1" rel='external'>id</a> dont la valeur doit se retrouver
dans l&#8217;attribut <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/interact/forms.html#adef-for" class='spip_glossaire' title="Voir la description de 'for' dans la documentation de 'html' section 1" rel='external'>for</a>
d&#8217;une balise 
<a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/interact/forms.html#edef-LABEL" class='spip_glossaire' title="Voir la description de 'label' dans la documentation de 'html'" rel='external'>label</a>. Le contenu de la balise 
<a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/interact/forms.html#edef-LABEL" class='spip_glossaire' title="Voir la description de 'label' dans la documentation de 'html'" rel='external'>label</a>
 indique l&#8217;information attendue par la balise 
<a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/interact/forms.html#edef-INPUT" class='spip_glossaire' title="Voir la description de 'input' dans la documentation de 'html'" rel='external'>input</a>.  Pour simplifier, on considère que cette balise <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/interact/forms.html#edef-LABEL" class='spip_glossaire' title="Voir la description de 'label' dans la documentation de 'html'" rel='external'>label</a> doit apparaître avant la balise <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/interact/forms.html#edef-INPUT" class='spip_glossaire' title="Voir la description de 'input' dans la documentation de 'html'" rel='external'>input</a>&nbsp;qu&#8217;elle référence.</p>

<p>Repérer les balises 
<a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/interact/forms.html#edef-INPUT" class='spip_glossaire' title="Voir la description de 'input' dans la documentation de 'html'" rel='external'>input</a> non précédées d&#8217;une balise 
<a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/interact/forms.html#edef-LABEL" class='spip_glossaire' title="Voir la description de 'label' dans la documentation de 'html'" rel='external'>label</a>, et les préfixer par une telle balise 
avec pour contenu la valeur de l&#8217;attribut 
<a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/interact/forms.html#adef-value-INPUT" class='spip_glossaire' title="Voir la description de 'value' dans la documentation de 'html' section 1" rel='external'>value</a> de la balise <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/interact/forms.html#edef-INPUT" class='spip_glossaire' title="Voir la description de 'input' dans la documentation de 'html'" rel='external'>input</a>
(beaucoup de formulaires indiquent
comme valeur par défaut le type d&#8217;information souhaitée 
et c&#8217;est le cas du formulaire de recherche intégré à cet énoncé).</p>

<p>Si la balise <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/interact/forms.html#edef-INPUT" class='spip_glossaire' title="Voir la description de 'input' dans la documentation de 'html'" rel='external'>input</a> ne contient pas d&#8217;identifiant on lui affecte comme identifiant la valeur de l&#8217;attribut <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/index/elements.html" class='spip_glossaire' title="Voir la description de 'name' dans la documentation de 'html'" rel='external'>name</a>. Pour simplifier, on suppose que la page HTML ne contient pas des balises <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/interact/forms.html#edef-INPUT" class='spip_glossaire' title="Voir la description de 'input' dans la documentation de 'html'" rel='external'>input</a> ayant le même attribut <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/index/elements.html" class='spip_glossaire' title="Voir la description de 'name' dans la documentation de 'html'" rel='external'>name</a>. On suppose aussi qu&#8217;elle ne contient pas d&#8217;éléments ayant un identifiant identique à un attribut <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/index/elements.html" class='spip_glossaire' title="Voir la description de 'name' dans la documentation de 'html'" rel='external'>name</a> d&#8217;une balise <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/interact/forms.html#edef-INPUT" class='spip_glossaire' title="Voir la description de 'input' dans la documentation de 'html'" rel='external'>input</a>.</p>


<div class='solution'>
<div>Solution
<a href="https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?action=acceder_document&amp;arg=637&amp;cle=c0f0beb27f3db5f763c1db20181675d54645ced2&amp;file=distant%2FVCS%2FLI355%2FTD%2F7%2Finputs.php"
      style='float:right'
      class='solution'>T&eacute;l&eacute;charger inputs.php</a>
</div>
<p><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">ouvrante</span><span style="color: #007700">(</span><span style="color: #0000BB">$parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$depth</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$tables</span><span style="color: #007700">;<br />&nbsp;static&nbsp;</span><span style="color: #0000BB">$titles&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$tables&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$labels&nbsp;</span><span style="color: #007700">=&nbsp;array();<br /><br />&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">])&nbsp;{<br />&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />&nbsp;}<br />&nbsp;</span><span style="color: #FF8000">//&nbsp;La&nbsp;ligne&nbsp;suivante&nbsp;concerne&nbsp;la&nbsp;Question&nbsp;4&nbsp;+&nbsp;declaration&nbsp;global<br />&nbsp;</span><span style="color: #007700">if&nbsp;((</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'td'</span><span style="color: #007700">)&nbsp;AND&nbsp;!isset(</span><span style="color: #0000BB">$tables</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">]))&nbsp;</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'th'</span><span style="color: #007700">;<br />&nbsp;</span><span style="color: #0000BB">$depth</span><span style="color: #007700">++;<br />&nbsp;if&nbsp;((</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'img'</span><span style="color: #007700">)&nbsp;AND&nbsp;!isset(</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'alt'</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'alt'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'src'</span><span style="color: #007700">]);<br />&nbsp;}<br />&nbsp;if&nbsp;((</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'a'</span><span style="color: #007700">)&nbsp;AND&nbsp;isset(</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'href'</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$precedent&nbsp;</span><span style="color: #007700">=&nbsp;isset(</span><span style="color: #0000BB">$titles</span><span style="color: #007700">[</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'href'</span><span style="color: #007700">]])&nbsp;?&nbsp;</span><span style="color: #0000BB">$titles</span><span style="color: #007700">[</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'href'</span><span style="color: #007700">]]&nbsp;:&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;if&nbsp;(!isset(</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'title'</span><span style="color: #007700">])&nbsp;OR&nbsp;(</span><span style="color: #0000BB">$precedent&nbsp;</span><span style="color: #007700">AND&nbsp;</span><span style="color: #0000BB">$precedent&nbsp;</span><span style="color: #007700">!=&nbsp;</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'title'</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$precedent</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">$precedent&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Lien&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;(</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$titles</span><span style="color: #007700">)+</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'title'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$precedent</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$titles</span><span style="color: #007700">[</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'href'</span><span style="color: #007700">]]&nbsp;=&nbsp;</span><span style="color: #0000BB">$precedent</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Question&nbsp;5<br />&nbsp;&nbsp;&nbsp;//&nbsp;si&nbsp;pas&nbsp;de&nbsp;ID&nbsp;prendre&nbsp;name,&nbsp;bien&nbsp;que&nbsp;ca&nbsp;ne&nbsp;marche&nbsp;pas&nbsp;si&nbsp;repetition<br />&nbsp;</span><span style="color: #007700">}&nbsp;elseif&nbsp;((</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'input'</span><span style="color: #007700">)&nbsp;AND&nbsp;isset(</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'name'</span><span style="color: #007700">])){<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$id&nbsp;</span><span style="color: #007700">=&nbsp;(isset(</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'id'</span><span style="color: #007700">]))?</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'id'</span><span style="color: #007700">]:</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'name'</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'id'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!isset(</span><span style="color: #0000BB">$labels</span><span style="color: #007700">[</span><span style="color: #0000BB">$id</span><span style="color: #007700">])&nbsp;AND&nbsp;isset(</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'value'</span><span style="color: #007700">])){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;label&nbsp;for='$id'&gt;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'value'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">"&lt;/label&gt;"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;<br />&nbsp;}&nbsp;elseif&nbsp;(</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'label'</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$labels</span><span style="color: #007700">[</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'for'</span><span style="color: #007700">]]&nbsp;=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />&nbsp;&nbsp;<br />&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;$name"</span><span style="color: #007700">;<br />&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$attrs&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$k&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;$k='$v'"</span><span style="color: #007700">;<br />&nbsp;</span><span style="color: #0000BB">$ferme</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br />}&nbsp;&nbsp;&nbsp;&nbsp;<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></p></div>


<span id='e2205'></span>


<h2 id='a6'>6 Indentation du texte HTML</h2>
<p>Pour  améliorer l&#8217;accessibilité au-delà de ces interventions, il est très utile
de disposer d&#8217;un texte HTML correctement indenté. Il est de nouveau possible d&#8217;utiliser SAX pour cela. Il suffit d&#8217;envoyer  sur le flux de sortie le texte HTML fourni, mais en faisant précéder toutes les balises ouvrantes de profondeur <i>n</i>  par un saut de ligne et <i>2n</i> espaces. Leurs attributs seront précédés d&#8217;un saut de ligne et de <i>2n+1</i> espaces. Les balises fermantes seront elles aussi précédées d&#8217;un saut de ligne et de <i>2n</i> espaces, sauf si le texte qui les précède ne se termine pas par un saut de ligne ou un espace.</p>

<p>Pour atteindre ce résultat, nous utiliserons un tableau <i>t</i> et un compteur <i>c</i>&nbsp;:</p>

<ul class="spip"><li> <i>c</i> sera une chaîne de <i>2n</i> espaces où <i>n</i> indique en permanence le niveau d&#8217;imbrication de la dernière balise ouvrante rencontrée&nbsp;;</li></ul>
<ul class="spip"><li> <i>t</i> sera un tableau indexé par la variable précédente, et contenant en permanence le texte figurant après le dernier chevron fermant  rencontré  et avant le prochain chevron ouvrant.</li></ul>
<p>Définir 3 nouveaux preneurs pour résoudre le problème à l&#8217;aide de ces variables.</p>


<div class='solution'>
<div>Solution
<a href="https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?action=acceder_document&amp;arg=636&amp;cle=0882cb938fdc4b4d4cdd97844befa7f8aa472e52&amp;file=distant%2FVCS%2FLI355%2FTD%2F7%2FindentationHTML.php"
      style='float:right'
      class='solution'>T&eacute;l&eacute;charger indentationHTML.php</a>
</div>
<p><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$contenu&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"&nbsp;"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"&nbsp;"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$depth&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"&nbsp;"</span><span style="color: #007700">;<br /><br />function&nbsp;</span><span style="color: #0000BB">ouvrante</span><span style="color: #007700">(</span><span style="color: #0000BB">$parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$depth</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$contenu</span><span style="color: #007700">;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$t&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$contenu</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">];<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">preg_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">"%[\n\t&nbsp;]+$%"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">"\n$depth"</span><span style="color: #007700">;<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$contenu</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">;<br />&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$attrs&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$k&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">"\n&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$depth&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$k&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"='"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">addslashes</span><span style="color: #007700">(</span><span style="color: #0000BB">$v</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"'"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"&gt;"</span><span style="color: #007700">;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$depth&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">'&nbsp;&nbsp;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$contenu</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">]=&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">;<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">fermante</span><span style="color: #007700">(</span><span style="color: #0000BB">$parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$depth</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$contenu</span><span style="color: #007700">;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$t&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$contenu</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">];<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$depth&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$depth</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">preg_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">"%[\n\t&nbsp;]+$%"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n$depth"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">);<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;/"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"&gt;"</span><span style="color: #007700">;<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">texte</span><span style="color: #007700">(</span><span style="color: #0000BB">$parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">)<br />{<br />&nbsp;</span><span style="color: #FF8000">//&nbsp;en&nbsp;cas&nbsp;de&nbsp;texte&nbsp;de&nbsp;grande&nbsp;longueur,&nbsp;plusieurs&nbsp;appels&nbsp;de&nbsp;cette&nbsp;fonction&nbsp;se&nbsp;suivront.<br />&nbsp;</span><span style="color: #007700">global&nbsp;</span><span style="color: #0000BB">$contenu</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$depth</span><span style="color: #007700">;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$contenu</span><span style="color: #007700">[</span><span style="color: #0000BB">$depth</span><span style="color: #007700">]&nbsp;.=&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">//Tests<br />/*function&nbsp;accessibiliser($file)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xml_parser&nbsp;=&nbsp;xml_parser_create();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xml_set_element_handler($xml_parser,&nbsp;"ouvrante",&nbsp;"fermante");<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xml_set_character_data_handler($xml_parser,&nbsp;"texte");<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xml_parser_set_option($xml_parser,&nbsp;XML_OPTION_CASE_FOLDING,&nbsp;false);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!($f&nbsp;=&nbsp;fopen($file,&nbsp;"r")))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die("Impossible&nbsp;d'ouvrir&nbsp;le&nbsp;fichier&nbsp;'$file'");<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;($data&nbsp;=&nbsp;fread($f,&nbsp;1024))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!xml_parse($xml_parser,&nbsp;$data,&nbsp;feof($f)))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die(sprintf("erreur&nbsp;XML&nbsp;:&nbsp;%s&nbsp;ligne&nbsp;%d",<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xml_error_string(xml_get_error_code($xml_parser)),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xml_get_current_line_number($xml_parser)));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xml_parser_free($xml_parser);<br />}&nbsp;*/<br /><br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></p></div>



</div><div id='pied' class='pied_page'><ul>
<li><a href="http://jigsaw.w3.org/css-validator/validator?uri=https%3A%2F%2Fwww-licence.ufr-info-p6.jussieu.fr%2Flmd%2Flicence%2F2013%2Fue%2FLI355-2014fev%2FAccessibilite-des-sites-Web"
	rel='noindex nofollow'
	class='validation-css'
	title='v&eacute;rifier la validit&eacute; CSS 2.1'>Valid CSS 2.1</a></li>
<li><a href='http://validator.w3.org/check?uri=https%3A%2F%2Fwww-licence.ufr-info-p6.jussieu.fr%2Flmd%2Flicence%2F2013%2Fue%2FLI355-2014fev%2FAccessibilite-des-sites-Web'
	class='validation-xml'
	rel='noindex nofollow'
	title='v&eacute;rifier la validit&eacute; XHTML Baisc 1.1'>Valid XHTML Basic 1.1</a></li>
<li><a href='http://www.contentquality.com/Default.asp?Url1=https%3A%2F%2Fwww-licence.ufr-info-p6.jussieu.fr%2Flmd%2Flicence%2F2013%2Fue%2FLI355-2014fev%2FAccessibilite-des-sites-Web&amp;rptmode=2'
	 class='validation-wcag'
	title='v&eacute;rifier la validit&eacute; WCAG 2.0 AAA'>Triple-A conformance Web Content Accessibility Guidelines 2.0</a></li>
<li class='date-publi'>
Calcul&eacute; le 13 mai 2014 &agrave; 12h18min<br />
par 
<a href='https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/LI355-2014fev/spip.php?page=auteur&amp;id_auteur=1&amp;sujet=Signaler%20un%20souci%20technique%20avec%20le%20site%20PACS%202013%202014' 
	rel='noindex nofollow'
	title='Signaler un souci technique avec le site'>DidacSPIP</a><br />
Universit&eacute; Pierre et Marie Curie
</li>
<li><a href='http://validator.w3.org/mobile/check?docAddr=https%3A%2F%2Fwww-licence.ufr-info-p6.jussieu.fr%2Flmd%2Flicence%2F2013%2Fue%2FLI355-2014fev%2FAccessibilite-des-sites-Web'
	class='mobile-ok'
	rel='noindex nofollow'
	title='v&eacute;rifier la validit&eacute; Mobile OK'>Mobile OK</a></li>
<li><a href='http://www.spip.net'
	class='reference-spip'
	title='Visiter SPIP'>SPIP</a></li>
<li><a href="http://prefetch.validatorsearch.verisignlabs.com"
	rel='noindex nofollow'
	title='voir http://validatorsearch.verisignlabs.com/'></a></li>
</ul></div></div></body>
</html>
